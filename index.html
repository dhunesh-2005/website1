<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ramiah Rice Mill Feeds | Premium Cattle & Livestock Nutrition</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

    <style>
        /* --- Base Reset & Typography --- */
        body {
            font-family: 'Poppins', sans-serif;
            margin: 0;
            padding: 0;
            line-height: 1.6;
            background-color: #f7f7f7; /* Light background */
            color: #333;
        }

        h1, h2, h3 {
            font-weight: 600;
            color: #e08907; /* Dark Green */
        }

        a {
            text-decoration: none;
            color: #006400;
            transition: color 0.3s;
        }

        a:hover {
            color: #6b8e23; /* Olive Green */
        }

        /* --- Header & Navigation (MODIFIED FOR SEARCH BAR) --- */
        header {
            background-color: #fff;
            padding: 15px 5%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
            /* Added Flexbox properties for layout */
            gap: 20px; 
        }

        .logo {
            font-size: 1.8em;
            font-weight: 700;
            color: #8b4513; /* Brown/Earth Tone */
            flex-shrink: 0; /* Prevents logo from shrinking */
            order: 1; /* Desktop order: 1 */
        }
        
        /* New style for the search container */
        .search-container {
            /* flex-grow: 1; */ /* <-- REMOVED to stop it from taking all space */
            max-width: 400px;
            order: 3; /* Desktop order: 3 */
        }

        #product-search {
            width: 100%; 
            padding: 8px 12px;
            border: 1px solid #ccc; 
            border-radius: 4px;
            box-sizing: border-box;
            font-size: 1em;
        }

        /* --- NEW: Menu Toggle Button (Hamburger) --- */
        #menu-toggle {
            display: none; /* Hidden on desktop */
            font-size: 1.8em;
            background: none;
            border: none;
            cursor: pointer;
            color: #333;
            padding: 0 5px; /* Add some tap area */
        }

        /* NEW STYLE FOR NAV */
        nav {
            order: 2; /* Desktop order: 2 */
        }

        nav a {
            margin-left: 25px;
            font-weight: 500;
            padding: 8px 12px;
            border-radius: 4px;
        }
        
        /* NEW: Class to show nav on mobile */
        nav.nav-open {
            display: flex;
        }

        /* --- NEW: Notification Bell Styles --- */
        .notification-container {
            position: relative; /* Anchor for the dropdown */
        }

        #notification-bell {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.5em; /* Bell icon size */
            position: relative;
            color: #333;
            padding: 0 5px; /* Add some tap area */
        }

        .notification-dot {
            position: absolute;
            top: 1px;
            right: 2px;
            width: 9px;
            height: 9px;
            background-color: red;
            border-radius: 50%;
            border: 1px solid white;
        }

        .notification-dropdown {
            display: none; /* Hidden by default */
            position: absolute;
            top: 100%; /* Position below the bell */
            right: 0;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            width: 320px;
            max-width: 90vw;
            z-index: 2001; /* Above other header content */
            border: 1px solid #eee;
            margin-top: 10px; /* Space from header */
        }

        .notification-dropdown.show {
            display: block; /* Show with JS */
        }

        .notification-header {
            font-weight: 600;
            font-size: 1.1em;
            padding: 12px 15px;
            border-bottom: 1px solid #eee;
        }

        .notification-item {
            border-bottom: 1px solid #f0f0f0;
        }
        .notification-item:last-child {
            border-bottom: none;
        }

        .notification-item a {
            display: block;
            padding: 12px 15px;
            font-size: 0.9em;
            line-height: 1.4;
            color: #333;
        }
        .notification-item a:hover {
            background-color: #f7f7f7;
        }

        .notification-item.new a {
            color: #d90000; /* Red for new items */
            font-weight: 500;
        }
        /* --- END Notification Styles --- */

        /* --- NEW: Wrapper for header icons --- */
        .header-icons {
            display: flex;
            align-items: center;
            gap: 10px; /* Space between bell and hamburger */
            order: 4; /* Desktop: Logo, Nav, Search, Icons */
        }


        .cta-nav {
            background-color: #ff8c00; /* Bright Orange Accent */
            color: white !important;
            padding: 10px 18px;
            border-radius: 5px;
            transition: background-color 0.3s;
        }

        .cta-nav:hover {
            background-color: #e57e00;
        }
        
        /* --- Hero Section (Image and Text Overlay) --- */
.hero {
    /* Image background settings */
    background-image: url('img/front1.jpg'); /* CRITICAL: Change 'hero-background.jpg' to your file name if different */
    background-size: cover;          
    background-position: center center; 
    background-repeat: no-repeat;    
    
    /* Text layout settings */
    color: white;
    text-align: center;
    padding: 100px 20px;
    height: 400px; /* Standard height; adjust if needed */
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    position: relative; 
    overflow: hidden; 
}
/* Dark overlay for text readability */
.hero::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.4); /* 40% black overlay to make text stand out */
    z-index: 1; 
}
/* Ensure text is above the overlay */
.hero h1, .hero p, .hero .cta-button {
    z-index: 2; 
    position: relative;
}
/* NOTE: The existing h1, p, and cta-button styles remains unchanged */

        .cta-button {
            display: inline-block;
            background-color: #ff8c00;
            color: white;
            padding: 12px 30px;
            border-radius: 5px;
            font-weight: 600;
            transition: background-color 0.3s;
        }

        .cta-button:hover {
            background-color: #e57e00;
        }

        /* --- Products Section --- */
        .product-grid {
            padding: 60px 5%;
            text-align: center;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 30px;
        }
        
        /* Added for search filter */
        .product-grid > .product-card {
            display: flex; 
        }

        .product-grid h2 {
            width: 100%;
            margin-bottom: 40px; 
            font-size: 2.5em;
        }

.product-image-container {
    position: relative;
    display: inline-block; /* Helps contain the absolute overlay */
}

/* The Out of Stock text/badge */
.out-of-stock-overlay {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background-color: rgba(255, 0, 0, 0.7); /* Red transparent background */
    color: white;
    padding: 10px 20px;
    border-radius: 5px;
    font-weight: bold;
    font-size: 1.2em;
    z-index: 10; /* Ensure it is on top of the image */
}

/* Optional: Fade the image slightly */
.product-image-container img {
    opacity: 0.5;
}

/* Style for disabled buttons/controls */
.disabled-btn {
    background-color: #6c757d !important; /* Grey color for the main button */
    cursor: not-allowed;
}

.cart-controls.disabled .qty-btn {
    opacity: 0.5;
    cursor: not-allowed;
}

.price-selector.disabled label {
    color: #6c757d;
}

/* Ensure disabled radio inputs can't be clicked */
.price-selector.disabled input[type="radio"] {
    pointer-events: none;
}
/* --- END NEW STYLES FOR OUT OF STOCK --- */


/* The Out of Stock text/badge - MODIFIED FOR BETTER FONT/SYMBOLS */




        .product-card {
            background-color: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            width: 300px; 
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
            text-align: left;
            display: flex;
            flex-direction: column;
        }

        .product-card img {
            width: 100%;
            height: 200px; 
            object-fit: cover;
            border-radius: 6px;
            margin-bottom: 15px;
        }

        .product-card h3 {
            color: #8b4513;
            margin-top: 0;
        }

        /* Price Display */
        .price-selector {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
        }

        .price-selector label {
            display: block;
            flex-grow: 1;
            text-align: center;
            cursor: pointer;
            padding: 10px 5px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 0.9em;
            transition: background-color 0.2s;
        }

        .price-selector input[type="radio"] {
            display: none;
        }

        .price-selector input[type="radio"]:checked + label {
            /* FIX: Use Dark Green for high visibility */
            background-color: #006400; 
            color: white; /* Ensure text is visible on the dark background */
            border-color: #006400;
            font-weight: 600;
        }

        .cart-controls {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: auto;
            padding-top: 15px;
        }

        .cart-controls label {
            font-weight: 500;
            font-size: 0.9em;
        }

        .product-qty {
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            text-align: center;
            width: 100%;
            box-sizing: border-box;
        }

        .add-to-cart-btn {
            background-color: #006400; /* Dark Green */
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: background-color 0.3s;
        }

        .add-to-cart-btn:hover {
            background-color: #004d00;
        }
        
        /* --- About Us, Footer, and Modal styles --- */
        .about-us {
            background-color: #e6ffe6; /* Very light green */
            padding: 60px 5%;
            text-align: center;
        }

        .about-content {
            max-width: 800px;
            margin: 0 auto;
        }

        .about-content ul {
            list-style: none;
            padding: 0;
            display: flex;
            justify-content: space-around;
            margin-top: 30px;
        }

        .about-content li {
            font-weight: 600;
            color: #006400;
        }
        
        footer {
            background-color: #333;
            color: white;
            text-align: center;
            padding: 20px 0;
            font-size: 0.9em;
        }
        
        #floating-cart {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #ff8c00; /* Orange */
            color: white;
            padding: 15px;
            border-radius: 50%;
            font-size: 1.5em;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            transition: transform 0.2s;
        }

        #floating-cart:hover {
            transform: scale(1.1);
        }

        #cart-count {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: red;
            border-radius: 50%;
            padding: 2px 7px;
            font-size: 0.5em;
            line-height: 1;
            font-weight: bold;
        }

        .modal {
            display: none; 
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.4);
        }

        .modal-content {
            background-color: #fefefe;
            margin: 10% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 600px;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            position: relative;
            padding-top: 40px; /* Gives the close button space */
        }

        .close-btn {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            
            position: absolute; 
            top: 10px;
            right: 10px;
            z-index: 999999; /* Make this the highest priority layer */
            cursor: pointer;
            
            /* Add a visible background */
            width: 30px;
            height: 30px;
            line-height: 30px; /* Center the 'X' */
            font-size: 20px;
            text-align: center;
            color: #333;
            background-color: #f0f0f0; 
            border-radius: 50%;
            box-shadow: 0 0 3px rgba(0,0,0,0.2);
        }

        .close-btn:hover, .close-btn:focus {
            color: #000;
            text-decoration: none;
        }

        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #eee;
            padding: 10px 0;
        }

        .cart-item-details {
            flex-grow: 1;
        }

        .remove-item-btn {
            background-color: red;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            margin-left: 10px;
            font-size: 0.8em;
        }

        .cart-summary {
            border-top: 2px solid #006400;
            padding-top: 15px;
            margin-top: 15px;
            text-align: right;
            font-size: 1.2em;
            font-weight: 700;
        }

        /* --- NEW STYLES FOR BILL REVIEW & FORMS --- */
        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            font-size: 0.95em;
        }

        .form-group input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
        }
        
        .submit-button {
            width: 100%;
            margin-top: 10px;
            border: none;
            cursor: pointer;
        }


        /* --- NEW STYLES FOR QTY BUTTONS --- */
.quantity-input-group {
    display: flex;
    align-items: center;
    width: 100%;
    margin-bottom: 10px; /* Space above 'Add to Cart' button */
}

.quantity-input-group .qty-btn {
    width: 35px;
    height: 35px;
    font-size: 1.2em;
    font-weight: 700;
    line-height: 1;
    border: 1px solid #ccc;
    background-color: #f0f0f0;
    cursor: pointer;
    padding: 0;
    border-radius: 4px;
    transition: background-color 0.2s;
}

.quantity-input-group .qty-btn:hover {
    background-color: #ddd;
}

.quantity-input-group .product-qty {
    flex-grow: 1; /* Takes up center space */
    text-align: center;
    border: 1px solid #ccc; /* Ensure input has a border */
    border-radius: 0; /* Remove rounded corners on sides next to buttons */
    height: 35px; 
    margin: 0;
    font-size: 1em;
    padding: 0 5px;
}

/* Fix borders so they blend with buttons */
.quantity-input-group .qty-btn:first-child {
    border-right: none;
    border-top-right-radius: 0;
    border-bottom-right-radius: 0;
}

.quantity-input-group .qty-btn:last-child {
    border-left: none;
    border-top-left-radius: 0;
    border-bottom-left-radius: 0;
}

        .final-bill {
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 10px;
            /* max-height: 250px; */ /* <-- THIS WAS REMOVED */
            /* overflow-y: auto; */   /* <-- THIS WAS REMOVED */
        }

        /* --- IMPORTANT: NEW CLASS FOR PDF RENDERING --- */
        /* This wrapper ensures we only capture the visible elements for the PDF */
        #pdf-content-wrapper {
            padding: 20px;
            background-color: white; /* Important for clean capture */
            border-radius: 8px;
        }


        .bill-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px dotted #eee;
            font-size: 0.9em;
        }

        .bill-totals {
            border-top: 2px solid #006400;
            padding-top: 10px;
            text-align: right;
            margin-bottom: 20px;
        }

        .bill-totals p {
            margin: 5px 0;
        }

        .bill-totals .grand-total {
            font-size: 1.3em;
            font-weight: 700;
            color: #cc5500;
        }
        
        /* Secondary Button Style */
        .secondary-button {
            background-color: #f0f0f0;
            color: #333;
            padding: 10px 15px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .secondary-button:hover {
            background-color: #e0e0e0;
        }
        /* --- NEW PRINT STYLES --- */
/* --- NEW PRINT STYLES (FIXED) --- */


        /* --- MODIFIED MEDIA QUERY (FOR NEW LAYOUT) --- */
        @media (max-width: 768px) {
            header { 
                flex-direction: row; 
                flex-wrap: wrap;    
                justify-content: space-between; /* Puts Logo left, Icons right */
                align-items: center;
                gap: 10px; 
            }
            
            .logo { 
                order: 1; 
                font-size: 1.5em; 
            }
            
            /* NEW: Icon wrapper on mobile */
            .header-icons {
                order: 2; /* Right side of top row */
            }

            .notification-container {
                order: 2; /* Bell second on right */
            }
            
            #menu-toggle {
                display: block;
                order: 1; /* Hamburger first on right */
            }

            .search-container { 
                order: 3; /* Search bar on its own row */
                width: 100%;
                flex-basis: 100%; /* Force new line for search */
                margin-top: 10px; 
            }
            
            nav { 
                display: none; 
                order: 4; /* Nav panel last */
                width: 100%;   
                margin-top: 10px; 
                flex-direction: column; 
            }

            nav a { 
                margin: 0; /* Remove side margin */
                padding: 12px; /* Add padding for tapping */
                text-align: center;
                border-bottom: 1px solid #f0f0f0;
            }
            nav a:last-child {
                border-bottom: none;
            }


            .hero h1 { font-size: 2em; }
            .product-card { width: 100%; }
            .about-content ul { flex-direction: column; gap: 10px; }
        }
        
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script> 
</head>
<body>

    <header>
        <div class="logo">🌾 Ramiah Rice Mill Feeds</div>
        
        <div class="header-icons">
            <button id="menu-toggle" aria-label="Open navigation menu">
                &#9776; </button>
            
            <div class="notification-container">
                <button id="notification-bell" aria-label="Open notifications">
                    🔔
                    <span class="notification-dot"></span> </button>
                <div id="notification-dropdown" class="notification-dropdown">
                    <div class="notification-header">Notifications</div>
                    <div class="notification-item new">
                        <a href="#">Welcome 🎊</a>
                    </div>
                    <!--<div class="notification-item">
                        <a href="#">Exam dates for July 2025 Semester - 11th, 12th, 13th, 14th December 2025 have been finalized</a>
                    </div>
                    <div class="notification-item">
                        <a href="#">Exam Registration is open for July 2025 Semester courses</a>
                    </div>
                    <div class="notification-item">
                        <a href="#">Framework for Universities to conduct examinations for SWAYAM Courses</a>
                    </div>-->
                </div>
            </div>
        </div>
        
        <div class="search-container">
            <input type="text" id="product-search" placeholder="Search products by name or nutrient..." >
        </div>
        
       <nav id="main-nav"> <a href="#home">Home</a>
            <a href="#products">Products</a>
            <a href="#about">About Us</a>
        </nav>
    </header>

    <section id="home" class="hero">
        
        <h1>Ramiah Rice Mill Feeds</h1>
        <p>The Mill You Trust for Livestock Health.</p>
        <br>
        <a href="#products" class="cta-button">Explore Our Feeds</a>
    </section>

    <section id="products" class="product-grid">
        <h2>Our Premium Cattle Feed Products</h2>

        <div class="product-card" data-bag-price="1500" data-kg-price="30" data-name="White Corn"> 
            <img src="img/White Maize.jpg" alt="White Corn">
            <h3>வெள்ளை சோளம் (White Corn)</h3>
            
            <p>High-energy grain, meticulously cleaned and processed for maximum nutritional value. Ideal for dairy and beef cattle.(vellai cholam)</p>
            
            <div class="price-selector">
                <input type="radio" id="corn-kg" name="corn-unit" value="kg" checked>
                <label for="corn-kg">Loose (per kg) - ₹30.00</label>
                
                <input type="radio" id="corn-bag" name="corn-unit" value="bag">
                <label for="corn-bag"> Bag (50kg) - ₹1500.00</label>
            </div>

            <div class="nutri-info">
                <span class="nutri-stat">Protein: 8%</span>
                <span class="nutri-stat">Moisture: &lt;14%</span>
            </div>

            <div class="cart-controls">
    <label class="quantity-label" for="qty-corn-unique">Quantity (Bags):</label> 
    <div class="quantity-input-group">
        <button type="button" class="qty-btn" data-action="decrement" data-target="qty-corn-unique">-</button>
        <input type="text" id="qty-corn-unique" class="product-qty" value="1" min="1" readonly>
        <button type="button" class="qty-btn" data-action="increment" data-target="qty-corn-unique">+</button>
        </div>
    <button class="add-to-cart-btn">🛒 Add to Cart</button>
        </div>
        </div>

        <div class="product-card" data-bag-price="1500" data-kg-price="30" data-name="Pearl Millet">
            <img src="img/kambu.jpg" alt="Pearl Millet">
            <h3> கம்பு (Pearl Millet)</h3>
            <p>Excellent source of energy and protein, a popular choice for poultry and cattle feed formulations.(Kambu)</p>
            
            <div class="price-selector">
                <input type="radio" id="millet-kg" name="millet-unit" value="kg" checked>
                <label for="millet-kg">Loose (per kg) - ₹30.00</label>
                
                <input type="radio" id="millet-bag" name="millet-unit" value="bag">
                <label for="millet-bag"> Bag (50kg) - ₹1500.00</label>
            </div>

            <div class="nutri-info">
                <span class="nutri-stat">Protein: 11%</span>
                <span class="nutri-stat">Fiber: 2.5%</span>
            </div>

             <div class="cart-controls">
    <label class="quantity-label" for="qty-millet-unique">Quantity (Bags):</label> 
    <div class="quantity-input-group">
        <button type="button" class="qty-btn" data-action="decrement" data-target="qty-millet-unique">-</button>
        <input type="text" id="qty-millet-unique" class="product-qty" value="1" min="1" readonly>
        <button type="button" class="qty-btn" data-action="increment" data-target="qty-millet-unique">+</button>
        </div>
    <button class="add-to-cart-btn">🛒 Add to Cart</button>
        </div>
        </div>

        

        <div class="product-card" data-bag-price="600" data-kg-price="12" data-name="Rice Bran">
            <img src="img/thavidu.png" alt="Rice Bran">
            <h3>நெல் தவிடு (Rice Bran)</h3>
            <p>A highly nutritious and cost-effective rice milling byproduct, excellent for enhancing feed digestibility and fat content.(Nel Thavidu)</p>
            
            <div class="price-selector">
                <input type="radio" id="bran-kg" name="bran-unit" value="kg" checked>
                <label for="bran-kg">Loose (per kg) - ₹12.00</label>
                
                <input type="radio" id="bran-bag" name="bran-unit" value="bag">
                <label for="bran-bag"> Bag (50kg) - ₹600.00</label>
            </div>

            <div class="nutri-info">
                <span class="nutri-stat">Fat: 12%</span>
                <span class="nutri-stat">Fiber: 10%</span>
            </div>

             <div class="cart-controls">
    <label class="quantity-label" for="qty-bran-unique">Quantity (Bags):</label> 
    <div class="quantity-input-group">
        <button type="button" class="qty-btn" data-action="decrement" data-target="qty-bran-unique">-</button>
        <input type="text" id="qty-bran-unique" class="product-qty" value="1" min="1" readonly>
        <button type="button" class="qty-btn" data-action="increment" data-target="qty-bran-unique">+</button>
        </div>
    <button class="add-to-cart-btn">🛒 Add to Cart</button>
        </div>
        </div>

        

        <div class="product-card" data-bag-price="3000" data-kg-price="60" data-name="Peanut Oil Cake">
            <img src="img/kadala.png" alt="Peanut Oil Cake">
            <h3>கடலை புண்ணாக்கு (Peanut Oil Cake)</h3>
            <p>An excellent source of natural protein and energy, widely used as a primary supplement for lactating dairy cattle.(Kadalai Punnakku)</p>
            
            <div class="price-selector">
                <input type="radio" id="groundnut-kg" name="groundnut-unit" value="kg" checked>
                <label for="groundnut-kg">Loose (per kg) - ₹60.00</label>
                
                <input type="radio" id="groundnut-bag" name="groundnut-unit" value="bag">
                <label for="groundnut-bag">Bag (50kg) - ₹3000.00</label>
            </div>

            <div class="nutri-info">
                <span class="nutri-stat">Protein: 40%</span>
                <span class="nutri-stat">Fiber: 6%</span>
            </div>

             <div class="cart-controls">
    <label class="quantity-label" for="qty-groundnut-unique">Quantity (Bags):</label> 
    <div class="quantity-input-group">
        <button type="button" class="qty-btn" data-action="decrement" data-target="qty-groundnut-unique">-</button>
        <input type="text" id="qty-groundnut-unique" class="product-qty" value="1" min="1" readonly>
        <button type="button" class="qty-btn" data-action="increment" data-target="qty-groundnut-unique">+</button>
        </div>
    <button class="add-to-cart-btn">🛒 Add to Cart</button>
        </div>
        </div>
        
        

        
<div class="product-card" data-bag-price="1750" data-kg-price="35" data-name="Sesame Oil Cake">
    <img src="img/ellu.png" alt="Sesame Oil Cake">
    <h3>எள்ளு புண்ணாக்கு (Sesame Oil Cake)</h3>
    <p>A highly palatable feed rich in crude protein and essential minerals, beneficial for maintaining milk yield and quality.(Ellu Punnakku)</p>
    
    <div class="price-selector">
        <input type="radio" id="sesame-kg-new" name="sesame-unit-new" value="kg" checked>
        <label for="sesame-kg-new">Loose (per kg) - ₹35.00</label>
        
        <input type="radio" id="sesame-bag-new" name="sesame-unit-new" value="bag">
        <label for="sesame-bag-new"> Bag (50kg) - ₹1750.00</label>
    </div>
    
    <div class="nutri-info">
        <span class="nutri-stat">Protein: 42%</span>
        <span class="nutri-stat">Fat: 8%</span>
    </div>

    <div class="cart-controls">
        <label class="quantity-label" for="qty-sesame-unique-new">Quantity (Bags):</label> 
        <div class="quantity-input-group">
            <button type="button" class="qty-btn" data-action="decrement" data-target="qty-sesame-unique-new">-</button>
            <input type="text" id="qty-sesame-unique-new" class="product-qty" value="1" min="1" readonly>
            <button type="button" class="qty-btn" data-action="increment" data-target="qty-sesame-unique-new">+</button>
        </div>
        <button class="add-to-cart-btn">🛒 Add to Cart</button>
    </div>
</div>
       




        <div class="product-card" data-bag-price="1750" data-kg-price="35" data-name="Mung Bean Powder">
            <img src="img/pasiparuppu.png" alt="Mung Bean Powder">
            <h3>பாசி பருப்பு தூசி (mung bean powder)</h3>
            <p>High-quality, digestible protein supplement often used to enhance growth rates and overall health in young and adult livestock.(Pasi paruppu thoosi)</p>
            
            <div class="price-selector">
                <input type="radio" id="mung-kg" name="mung-unit" value="kg" checked>
                <label for="mung-kg">Loose (per kg) - ₹35.00</label>
                
                <input type="radio" id="mung-bag" name="mung-unit" value="bag">
                <label for="mung-bag"> Bag (50kg) - ₹1750.00</label>
            </div>

            <div class="nutri-info">
                <span class="nutri-stat">Protein: 24%</span>
                <span class="nutri-stat">Fiber: 4%</span>
            </div>

             <div class="cart-controls">
    <label class="quantity-label" for="qty-mung-unique">Quantity (Bags):</label> 
    <div class="quantity-input-group">
        <button type="button" class="qty-btn" data-action="decrement" data-target="qty-mung-unique">-</button>
        <input type="text" id="qty-mung-unique" class="product-qty" value="1" min="1" readonly>
        <button type="button" class="qty-btn" data-action="increment" data-target="qty-mung-unique">+</button>
        </div>
    <button class="add-to-cart-btn">🛒 Add to Cart</button>
        </div>
        </div>
        
        <div class="product-card" data-bag-price="1350" data-kg-price="27" data-name="Black Gram Dust">
            <img src="img/uluntham.jpg" alt="Black Gram Dust">
            <h3>உளுந்தம் பருப்பு தூசி(Black gram dust)</h3>
            <p>Highly palatable and protein-rich byproduct, widely recognized for boosting lactation and providing essential energy to livestock.(Uluntham paruppu Thoosi)</p>
            
            <div class="price-selector">
                <input type="radio" id="black-gram-kg" name="black-gram-unit" value="kg" checked>
                <label for="black-gram-kg">Loose (per kg) - ₹27.00</label>
                
                <input type="radio" id="black-gram-bag" name="black-gram-unit" value="bag">
                <label for="black-gram-bag"> Bag (50kg) - ₹1350.00</label>
            </div>

            <div class="nutri-info">
                <span class="nutri-stat">Protein: 25%</span>
                <span class="nutri-stat">Digestible: High</span>
            </div>

             <div class="cart-controls">
    <label class="quantity-label" for="qty-blackgram-unique">Quantity (Bags):</label> 
    <div class="quantity-input-group">
        <button type="button" class="qty-btn" data-action="decrement" data-target="qty-blackgram-unique">-</button>
        <input type="text" id="qty-blackgram-unique" class="product-qty" value="1" min="1" readonly>
        <button type="button" class="qty-btn" data-action="increment" data-target="qty-blackgram-unique">+</button>
        </div>
    <button class="add-to-cart-btn">🛒 Add to Cart</button>
        </div>
        </div>
   
        <div class="product-card" data-bag-price="1400" data-kg-price="28" data-name="Toor Dal Dust">
    <div class="product-image-container">
        <img src="img/thuvaram.jpg" alt="Toor Dal Dust">
        <div class="out-of-stock-overlay">🚨 OUT OF STOCK 🚨</div>
    </div>
    
    <h3>துவாரம் பருப்பு தூசி (toor dal dust)</h3>
    <p>A cost-effective, easily digestible protein source used to enrich cattle and poultry feed for improved nutrition. (Thuvaram Paruppu Thoosi)</p>

    <div class="price-selector disabled">
        <input type="radio" id="toor-kg" name="toor-unit" value="kg" disabled checked> <label for="toor-kg">Loose (per kg) - ₹28.00</label>
        
        <input type="radio" id="toor-bag" name="toor-unit" value="bag" disabled>
        <label for="toor-bag"> Bag (50kg) - ₹1400.00</label>
    </div>
    
    <div class="nutri-info">
        <span class="nutri-stat">Protein: 21%</span>
        <span class="nutri-stat">Fibre: Low</span>
    </div>

    <div class="cart-controls disabled">
        <label class="quantity-label" for="qty-toor-unique">Quantity (Bags):</label> 
        <div class="quantity-input-group">
            <button type="button" class="qty-btn disabled" data-action="decrement" data-target="qty-toor-unique" disabled>-</button>
            <input type="text" id="qty-toor-unique" class="product-qty" value="0" min="0" readonly disabled>
            <button type="button" class="qty-btn disabled" data-action="increment" data-target="qty-toor-unique" disabled>+</button>
        </div>
        <button class="add-to-cart-btn disabled-btn" disabled>Out of Stock</button>
    </div>
</div>



        
        <div class="product-card" data-bag-price="1500" data-kg-price="30" data-name="High-Protein Maize">
            <img src="img/maize.jpg" alt="High-Protein Maize">
            <h3>மக்காச்சோளம் (Maize)</h3>
            <p>A specialized maize variety with elevated protein levels, providing superior nutritional density for high-performance livestock.(Makka cholam/Muthu cholam)</p>
            
            <div class="price-selector">
                <input type="radio" id="hpm-kg" name="hpm-unit" value="kg" checked>
                <label for="hpm-kg">Loose (per kg) - ₹30.00</label>
                
                <input type="radio" id="hpm-bag" name="hpm-unit" value="bag">
                <label for="hpm-bag"> Bag (50kg) - ₹1500.00</label>
            </div>

            <div class="nutri-info">
                <span class="nutri-stat">Protein: 12%</span>
                <span class="nutri-stat">Lysine: High</span>
            </div>

             <div class="cart-controls">
    <label class="quantity-label" for="qty-hpm-unique">Quantity (Bags):</label> 
    <div class="quantity-input-group">
        <button type="button" class="qty-btn" data-action="decrement" data-target="qty-hpm-unique">-</button>
        <input type="text" id="qty-hpm-unique" class="product-qty" value="1" min="1" readonly>
        <button type="button" class="qty-btn" data-action="increment" data-target="qty-hpm-unique">+</button>
        </div>
    <button class="add-to-cart-btn">🛒 Add to Cart</button>
        </div>
        </div>

        <div class="product-card" data-bag-price="1650" data-kg-price="33" data-name="Wheat Bran">
            <img src="img/wheat powder.png" alt="Wheat Bran">
            <h3>கோதுமை தவிடு (Wheat Bran)</h3>
            <p>Excellent source of dietary fiber, promoting healthy digestion and used as a bulk ingredient to mix into other high-density feeds.(Kodhumai Thavidu)</p>
            
            <div class="price-selector">
                <input type="radio" id="wheat-bran-kg" name="wheat-bran-unit" value="kg" checked>
                <label for="wheat-bran-kg">Loose (per kg) - ₹33.00</label>
                
                <input type="radio" id="wheat-bran-bag" name="wheat-bran-unit" value="bag">
                <label for="wheat-bran-bag"> Bag (50kg) - ₹1650.00</label>
            </div>

            <div class="nutri-info">
                <span class="nutri-stat">Fiber: 10%</span>
                <span class="nutri-stat">Protein: 15%</span>
            </div>

            <div class="cart-controls">
    <label class="quantity-label" for="qty-wheat-bran-unique">Quantity (Bags):</label> 
    <div class="quantity-input-group">
        <button type="button" class="qty-btn" data-action="decrement" data-target="qty-wheat-bran-unique">-</button>
        <input type="text" id="qty-wheat-bran-unique" class="product-qty" value="1" min="1" readonly>
        <button type="button" class="qty-btn" data-action="increment" data-target="qty-wheat-bran-unique">+</button>
        </div>
    <button class="add-to-cart-btn">🛒 Add to Cart</button>
        </div>
        </div>
        
        <div class="product-card" data-bag-price="1300" data-kg-price="28" data-name="Compound Cattle Feed">
            <img src="img/kuchchi.jpg" alt="Compound Cattle Feed">
            <h3> குச்சி தீவனம் (Cattle Feed)</h3>
            <p>A highly palatable and scientifically balanced feed designed to meet the complete nutritional needs for maintenance and milk production.(Kuchi Theevanam)</p>
            
            <div class="price-selector">
                <input type="radio" id="compound-feed-kg" name="compound-feed-unit" value="kg" checked>
                <label for="compound-feed-kg">Loose (per kg) - ₹28.00</label>
                
                <input type="radio" id="compound-feed-bag" name="compound-feed-unit" value="bag">
                <label for="compound-feed-bag"> Bag (50kg) - ₹1300.00</label>
            </div>

            <div class="nutri-info">
                <span class="nutri-stat">Protein: 18%</span>
                <span class="nutri-stat">TDN: High</span>
            </div>

             <div class="cart-controls">
    <label class="quantity-label" for="qty-compound-feed-unique">Quantity (Bags):</label> 
    <div class="quantity-input-group">
        <button type="button" class="qty-btn" data-action="decrement" data-target="qty-compound-feed-unique">-</button>
        <input type="text" id="qty-compound-feed-unique" class="product-qty" value="1" min="1" readonly>
        <button type="button" class="qty-btn" data-action="increment" data-target="qty-compound-feed-unique">+</button>
        </div>
    <button class="add-to-cart-btn">🛒 Add to Cart</button>
        </div>
        </div>

        <div class="product-card" data-bag-price="4100" data-kg-price="82" data-name="Raw Cotton Seeds">
            <img src="img/paruthi.png" alt="Raw Cotton Seeds">
            <h3>பருத்தி (Raw Cotton Seeds)</h3>
            <p>An excellent source of bypass fat and fiber, providing concentrated energy for high-yielding dairy cattle.(Paruthi)</p>
            
            <div class="price-selector">
                <input type="radio" id="cotton-seed-kg" name="cotton-seed-unit" value="kg" checked>
                <label for="cotton-seed-kg">Loose (per kg) - ₹82.00</label>
                
                <input type="radio" id="cotton-seed-bag" name="cotton-seed-unit" value="bag">
                <label for="cotton-seed-bag"> Bag (43kg) - ₹3500.00</label>
            </div>

            <div class="nutri-info">
                <span class="nutri-stat">Oil: 20%</span>
                <span class="nutri-stat">Fiber: 25%</span>
            </div>
 <div class="cart-controls">
    <label class="quantity-label" for="qty-cotton-seed-unique">Quantity (Bags):</label> 
    <div class="quantity-input-group">
        <button type="button" class="qty-btn" data-action="decrement" data-target="qty-cotton-seed-unique">-</button>
        <input type="text" id="qty-cotton-seed-unique" class="product-qty" value="1" min="1" readonly>
        <button type="button" class="qty-btn" data-action="increment" data-target="qty-cotton-seed-unique">+</button>
        </div>
    <button class="add-to-cart-btn">🛒 Add to Cart</button>
        </div>
        </div>

        

        <div class="product-card" data-bag-price="1750" data-kg-price="35" data-name="Urad Dal">
            <img src="img/ulunthu.jpg" alt="Urad Dal">
            <h3>உளுந்தம் பருப்பு (Urad Dal)</h3>
            <p>A highly concentrated source of vegetable protein, valued for its ability to improve digestion and boost energy in animal feed formulations.(Uluntham Paruppu)</p>
            
            <div class="price-selector">
                <input type="radio" id="urad-dal-kg" name="urad-dal-unit" value="kg" checked>
                <label for="urad-dal-kg">Loose (per kg) - ₹35.00</label>
                
                <input type="radio" id="urad-dal-bag" name="urad-dal-unit" value="bag">
                <label for="urad-dal-bag"> Bag (50kg) - ₹1750.00</label>
            </div>

            <div class="nutri-info">
                <span class="nutri-stat">Protein: 25%</span>
                <span class="nutri-stat">Fats: Low</span>
            </div>

            <div class="cart-controls">
                <label class="quantity-label" for="qty-urad-dal-unique">Quantity (Bags):</label> 
                <div class="quantity-input-group">
                    <button type="button" class="qty-btn" data-action="decrement" data-target="qty-urad-dal-unique">-</button>
                    <input type="text" id="qty-urad-dal-unique" class="product-qty" value="1" min="1" readonly>
                    <button type="button" class="qty-btn" data-action="increment" data-target="qty-urad-dal-unique">+</button>
                </div>
                <button class="add-to-cart-btn">🛒 Add to Cart</button>
            </div>
        </div>

        <div class="product-card" data-bag-price="4500" data-kg-price="90" data-name="Fenugreek Seeds">
            <img src="img/venthayam.png" alt="Fenugreek Seeds">
            <h3>வெந்தயம் (Fenugreek Seeds)</h3>
            <p>Known to stimulate appetite and improve digestion; used as a supplement to enhance overall gut health in livestock.(Venthayam)</p>
            
            <div class="price-selector">
                <input type="radio" id="fenugreek-kg" name="fenugreek-unit" value="kg" checked>
                <label for="fenugreek-kg">Loose (per kg) - ₹90.00</label>
                
                <input type="radio" id="fenugreek-bag" name="fenugreek-unit" value="bag">
                <label for="fenugreek-bag"> Bag (50kg) - ₹4500.00</label>
            </div>

            <div class="nutri-info">
                <span class="nutri-stat">Protein: 23%</span>
                <span class="nutri-stat">Digestive: Good</span>
            </div>

             <div class="cart-controls">
    <label class="quantity-label" for="qty-fenugreek-unique">Quantity (Bags):</label> 
    <div class="quantity-input-group">
        <button type="button" class="qty-btn" data-action="decrement" data-target="qty-fenugreek-unique">-</button>
        <input type="text" id="qty-fenugreek-unique" class="product-qty" value="1" min="1" readonly>
        <button type="button" class.="qty-btn" data-action="increment" data-target="qty-fenugreek-unique">+</button>
        </div>
    <button class="add-to-cart-btn">🛒 Add to Cart</button>
        </div>
        </div>

            

<div class="product-card" data-bag-price="1300" data-kg-price="30" data-name="Balanced Fodder Mix">
    <img src="img/mix.png" alt="Balanced Fodder Mix">
    <h3>கலப்பு தீவனம் (Balanced Fodder Mix)</h3>
    <p>A ready-to-feed blend of forage, grains, and supplements, ensuring complete and consistent nutrition for general herd health.(Kalappu Theevanam)</p>

    <div class="price-selector">
        <input type="radio" id="fodder-mix-kg" name="fodder-mix-unit" value="kg" checked>
        <label for="fodder-mix-kg">Loose (per kg) - ₹30.00</label>
        
        <input type="radio" id="fodder-mix-bag" name="fodder-mix-unit" value="bag">
        <label for="fodder-mix-bag"> Bag (45kg) - ₹1300.00</label>
    </div>

    <div class="nutri-info">
        <span class="nutri-stat">Protein: 14%</span>
        <span class="nutri-stat">Fiber: 18%</span>
    </div>

    <div class="cart-controls">
        <label class="quantity-label" for="qty-fodder-mix-unique">Quantity (Bags):</label>
        <div class="quantity-input-group">
            <button type="button" class="qty-btn" data-action="decrement" data-target="qty-fodder-mix-unique">-</button>
            <input type="text" id="qty-fodder-mix-unique" class="product-qty" value="1" min="1" readonly>
            <button type="button" class="qty-btn" data-action="increment" data-target="qty-fodder-mix-unique">+</button>
        </div>
        <button class="add-to-cart-btn">🛒 Add to Cart</button>
    </div>
</div>



        <div class="product-card" data-bag-price="1000" data-kg-price="100" data-name="Finger Millet">
    <img src="img/keppai.png" alt="Finger Millet">
    <h3>கேப்பை / கேழ்வரகு (Finger Millet)</h3>
    <p>A powerhouse of calcium and fiber; excellent for improving bone health and providing sustained energy to livestock. Used widely in feed for dairy animals and poultry.( keppai / Kelvaragu)</p>

    <div class="price-selector">
        <input type="radio" id="ragi-kg" name="ragi-unit" value="kg" checked>
        <label for="ragi-kg"> 1 படி (per Padi) - ₹100.00</label>
        
        <input type="radio" id="ragi-bag" name="ragi-unit" value="bag">
        <label for="ragi-bag"> 10 படி (10 padi) - ₹1000.00</label>
    </div>

    <div class="nutri-info">
        <span class="nutri-stat">Protein: 7.3%</span>
        <span class="nutri-stat">Calcium: High</span>
    </div>

    <div class="cart-controls">
        <label class="quantity-label" for="qty-ragi-unique">Quantity (Bags):</label>
        <div class="quantity-input-group">
            <button type="button" class="qty-btn" data-action="decrement" data-target="qty-ragi-unique">-</button>
            <input type="text" id="qty-ragi-unique" class="product-qty" value="1" min="1" readonly>
            <button type="button" class="qty-btn" data-action="increment" data-target="qty-ragi-unique">+</button>
        </div>
        <button class="add-to-cart-btn">🛒 Add to Cart</button>
    </div>
</div>
        <div class="product-card" data-bag-price="3000" data-kg-price="60" data-name="Groundnut Oil Powder">
    <img src="img/kadalai maavu.png" alt="Groundnut Oil Powder">
    <h3>கடலை புண்ணாக்கு மாவு (Groundnut Cake Powder)</h3>
    <p>A fine-textured, high-protein meal used as a critical ingredient in balanced poultry, fish, and cattle feed formulations. Excellent for growth and muscle development. (Kadalai Punnakku Maavu)</p>

    <div class="price-selector">
        <input type="radio" id="gop-kg" name="gop-unit" value="kg" checked>
        <label for="gop-kg">Loose (per kg) - ₹60.00</label>
        
        <input type="radio" id="gop-bag" name="gop-unit" value="bag">
        <label for="gop-bag"> Bag (50kg) - ₹3000.00</label>
    </div>

    <div class="nutri-info">
        <span class="nutri-stat">Protein: 48%</span>
        <span class="nutri-stat">Fibre: Low</span>
    </div>

    <div class="cart-controls">
        <label class="quantity-label" for="qty-gop-unique">Quantity (Bags):</label>
        <div class="quantity-input-group">
            <button type="button" class="qty-btn" data-action="decrement" data-target="qty-gop-unique">-</button>
            <input type="text" id="qty-gop-unique" class="product-qty" value="1" min="1" readonly>
            <button type="button" class="qty-btn" data-action="increment" data-target="qty-gop-unique">+</button>
        </div>
        <button class="add-to-cart-btn">🛒 Add to Cart</button>
    </div>
</div>
<div class="product-card" data-bag-price="1750" data-kg-price="35" data-name="Sesame Cake Powder">
    <img src="img/ellu maavu.png" alt="Sesame Cake Powder">
    <h3>எள் புண்ணாக்கு மாவு (Sesame Cake Powder)</h3>
    <p>A high-quality protein and mineral supplement, particularly rich in methionine and calcium. Promotes healthy feather growth in poultry and better milk quality in dairy animals. (Ellu Punnakku Maavu)</p>

    <div class="price-selector">
        <input type="radio" id="sesame-kg" name="sesame-unit" value="kg" checked>
        <label for="sesame-kg">Loose (per kg) - ₹35.00</label>
        
        <input type="radio" id="sesame-bag" name="sesame-unit" value="bag">
        <label for="sesame-bag"> Bag (50kg) - ₹1750.00</label>
    </div>

    <div class="nutri-info">
        <span class="nutri-stat">Protein: 40%</span>
        <span class="nutri-stat">Calcium: High</span>
    </div>

    <div class="cart-controls">
        <label class="quantity-label" for="qty-sesame-unique">Quantity (Bags):</label>
        <div class="quantity-input-group">
            <button type="button" class="qty-btn" data-action="decrement" data-target="qty-sesame-unique">-</button>
            <input type="text" id="qty-sesame-unique" class="product-qty" value="1" min="1" readonly>
            <button type="button" class="qty-btn" data-action="increment" data-target="qty-sesame-unique">+</button>
        </div>
        <button class="add-to-cart-btn">🛒 Add to Cart</button>
    </div>
</div>


<div class="product-card" data-bag-price="1500" data-kg-price="30" data-name="Whole Wheat Grain">
    <img src="img/wheat.png" alt="Whole Wheat Grain">
    <h3>கோதுமை (Wheat Grain)</h3>
    <p>A high-energy carbohydrate source often ground for inclusion in mixed feeds, providing sustained energy for growth and maintenance in livestock. (Godhumai)</p>
    
    <div class="price-selector">
        <input type="radio" id="wheat-grain-kg" name="wheat-grain-unit" value="kg" checked>
        <label for="wheat-grain-kg">Loose (per kg) - ₹30.00</label>
        
        <input type="radio" id="wheat-grain-bag" name="wheat-grain-unit" value="bag">
        <label for="wheat-grain-bag"> Bag (50kg) - ₹1500.00</label>
    </div>
    
    <div class="nutri-info">
        <span class="nutri-stat">Energy: High</span>
        <span class="nutri-stat">Protein: 12%</span>
    </div>

    <div class="cart-controls">
        <label class="quantity-label" for="qty-wheat-grain-unique">Quantity (Bags):</label> 
        <div class="quantity-input-group">
            <button type="button" class="qty-btn" data-action="decrement" data-target="qty-wheat-grain-unique">-</button>
            <input type="text" id="qty-wheat-grain-unique" class="product-qty" value="1" min="1" readonly>
            <button type="button" class="qty-btn" data-action="increment" data-target="qty-wheat-grain-unique">+</button>
        </div>
        <button class="add-to-cart-btn">🛒 Add to Cart</button>
    </div>
</div>

    </section>

    <section id="about" class="about-us">
        <h2>Our Commitment to Quality</h2>
        <div class="about-content">
            <p>Founded on decades of experience in the rice milling industry, we bring the same commitment to excellence to our cattle feed division. We control the process from sourcing to packaging, ensuring you receive the cleanest, highest-grade feed.</p>
            <ul>
                <li>✅ Decades of Milling Experience</li>
                <li>✅ Rigorous Quality Control</li>
                <li>✅ Reliable Bulk Supply</li>
                
            </ul>
            <P>India, TamilNadu, Madurai, Melur, Saruguvalayapatti</P>
                <p> Contact: thinkgood24hrs@gmail.com |+91 9585672658 | +91 8098106678  </p>
        </div>
    </section>

    <footer>
        <p>&copy; 2025 Ramiah Rice Mill Feeds. All Rights Reserved. </p>
    </footer>

    <div id="floating-cart">
        🛒 <span id="cart-count">0</span>
    </div>

    <div id="cart-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn" data-action="close-modal">X</span>
            <h2 id="modal-title">Your Order Summary</h2>

            <div id="cart-summary-view">
                <div id="cart-items-container">
                    <p id="empty-cart-message">Your cart is empty. Add some feed!</p>
                </div>
                <div class="cart-summary">
                    <p>Subtotal: <span id="cart-subtotal">₹0.00</span></p>
                    <button id="proceed-to-bill-btn" class="cta-button" disabled>Review Final Bill</button>
                </div>
            </div>
            
            <div id="bill-review-view" style="display:none; padding-top: 15px;">
                <div id="pdf-content-wrapper">
    <h2 style="text-align: center; color: #cc5500; font-size: 1.5em; margin-bottom: 5px;">
        🌾 Ramaiah Rice Mill Feeds
    </h2>
    <h3 style="text-align: center; color: #333; font-size: 1.2em; margin-top: 5px; border-bottom: 2px solid #ccc; padding-bottom: 10px;">
        Final Order Bill
    </h3>
    <p style="text-align: left; font-size: 0.9em; margin-bottom: 5px;">
        Date: <span id="bill-date"></span>
    </p>
    <p style="text-align: left; font-size: 0.9em; margin-top: 0; margin-bottom: 15px;">
        Time: <span id="bill-time"></span>
    </p>
    <div id="final-bill-details" class="final-bill">
    </div>
    
    <div class="bill-totals">
        <p>Subtotal: <span id="bill-subtotal">₹0.00</span></p>
        <p style="color: #333; font-weight: 600;">Total Kgs: <span id="bill-total-kg">0.00</span></p>
        <p class="grand-total">Grand Total: <span id="bill-grand-total">₹0.00</span></p>
    </div>
    <p style="font-size: 0.9em; color: #555;">Note: This is an inquiry summary. Price and availability will be confirmed via phone.</p>
</div>
                <button id="download-bill-btn" class="secondary-button" style="width: 30%; float: left; margin-right: 2%;">
                   ⬇️ Download Order Bill
                </button>
                 <button id="bill-back-btn" class="secondary-button" style="width: 30%; float: left;">← Back</button>
                 <button id="proceed-to-contact-btn" class="cta-button" style="width: 30%; float: right;">Continue →</button>
                <div style="clear:both;"></div>
            </div>
            

            <div id="order-form-view" style="display:none; padding-top: 15px;">
                <h3>Your Contact Information</h3>
                <p>Please provide your contact information to finalize your order inquiry. We will call you to confirm delivery details.</p>
                
                <form action="#" method="POST" id="checkout-form"> 
                   <div class="form-group">
                        <label for="customer_name">Your Name:</label>
                        <input type="text" id="customer_name" name="customer_name" required autocomplete="off"> 
                    </div>
                    <div class="form-group">
                        <label for="village_name">City / Village Name:</label>
                        <input type="text" id="village_name" name="village_name" required autocomplete="off"> 
                    </div>
                    
                    
                    
                    <div class="form-group">
    <label for="customer_phone">Phone Number:</label>
    <input 
        type="tel" 
        id="customer_phone" 
        name="phone_number" 
        required 
        autocomplete="off"
        minlength="10" 
        maxlength="10" 
        pattern="[0-9]{10}" 
        title="Phone number must be exactly 10 digits (0-9)."
    >
</div>




                    
                    <input type="hidden" name="order_details" id="order_data_json"> 
                    <input type="hidden" name="final_total_amount" id="final_total">
                    <input type="hidden" name="total_approx_kg" id="total_kg_hidden">

                    <button id="form-back-btn" class="secondary-button" style="width: 48%; float: left;">← Back to Bill</button>
                    <button type="submit" class="cta-button submit-button" style="width: 48%; float: right;">Submit Order </button>
                    <div style="clear:both;"></div>
                </form>
                <p id="order-message" style="margin-top: 15px; color: green; font-weight: bold; display: none;"></p>
            </div>
            
        </div>
    </div>
   
<script>
    document.addEventListener('DOMContentLoaded', () => {
        let cart = [];
       
        const APPS_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzckCZbk6eaBegc767buAmmG594ipZy5MoB4TTTEIDhk9czJT4EalRZJPvpevYGmHJ9SQ/exec"; 
        
        // --- DOM Elements ---
        const cartIcon = document.getElementById('floating-cart');
        const cartModal = document.getElementById('cart-modal');
        const closeBtn = document.querySelector('.close-btn'); 
        const cartCount = document.getElementById('cart-count');
        const cartItemsContainer = document.getElementById('cart-items-container');
        const cartSubtotal = document.getElementById('cart-subtotal');
        const emptyMessage = document.getElementById('empty-cart-message');

        // --- NEW ELEMENTS FOR 3-STEP FLOW ---
        const cartSummaryView = document.getElementById('cart-summary-view');
        const billReviewView = document.getElementById('bill-review-view');
        const orderFormView = document.getElementById('order-form-view');
        const proceedToBillBtn = document.getElementById('proceed-to-bill-btn');
        const proceedToContactBtn = document.getElementById('proceed-to-contact-btn');
        const billBackBtn = document.getElementById('bill-back-btn');
        const formBackBtn = document.getElementById('form-back-btn');
        const finalBillDetails = document.getElementById('final-bill-details');
        const billSubtotal = document.getElementById('bill-subtotal');
        const billGrandTotal = document.getElementById('bill-grand-total');
        const orderDataJsonInput = document.getElementById('order_data_json');
        const finalTotalInput = document.getElementById('final_total');
        const checkoutForm = document.getElementById('checkout-form');
        const orderMessage = document.getElementById('order-message'); 
        const modalTitle = document.getElementById('modal-title');     
        
        // NEW ELEMENTS FOR DOWNLOAD
        const downloadBillBtn = document.getElementById('download-bill-btn'); 
        const { jsPDF } = window.jspdf;                                     
        const pdfContentWrapper = document.getElementById('pdf-content-wrapper'); // New element to target

        // SEARCH ELEMENT
        const searchInput = document.getElementById('product-search'); 

        // --- NEW HAMBURGER MENU LOGIC ---
        const menuToggle = document.getElementById('menu-toggle');
        const mainNav = document.getElementById('main-nav');
        
        if (menuToggle && mainNav) {
            menuToggle.addEventListener('click', (event) => {
                event.stopPropagation();
                mainNav.classList.toggle('nav-open');
            });
        }
        // --- END NEW LOGIC ---

        // --- NEW NOTIFICATION BELL LOGIC ---
        const notificationBell = document.getElementById('notification-bell');
        const notificationDropdown = document.getElementById('notification-dropdown');

        if (notificationBell && notificationDropdown) {
            notificationBell.addEventListener('click', (event) => {
                event.stopPropagation(); // Prevent window click from firing
                notificationDropdown.classList.toggle('show');
                
                // Optional: Hide the red dot when opened
                const dot = notificationBell.querySelector('.notification-dot');
                if (dot) {
                    dot.style.display = 'none';
                }
            });
        }
        // --- END NEW LOGIC ---


        // --- VIEW MANAGEMENT FUNCTIONS ---
        function closeModal() {
            cartModal.style.display = 'none';
        }
        
        function filterProducts() {
            const searchTerm = searchInput.value.toLowerCase();
            const productCards = document.querySelectorAll('.product-card');

            productCards.forEach(card => {
                const title = card.querySelector('h3').textContent.toLowerCase();
                const description = card.querySelector('p').textContent.toLowerCase();
                const nutriInfo = card.querySelector('.nutri-info').textContent.toLowerCase();
                const searchableText = title + ' ' + description + ' ' + nutriInfo;

                if (searchableText.includes(searchTerm)) {
                    card.style.display = 'flex';
                } else {
                    card.style.display = 'none';
                }
            });
        }
        
        function handleUnitChange(event) {
            const card = event.target.closest('.product-card');
            const selectedUnit = event.target.value;
            const quantityLabel = card.querySelector('.quantity-label');
            const quantityInput = card.querySelector('.product-qty');

            if (selectedUnit === 'bag') {
                quantityLabel.textContent = 'Quantity (Bags):';
                quantityInput.setAttribute('min', '1');
                quantityInput.value = 1;
            } else if (selectedUnit === 'kg') {
                quantityLabel.textContent = 'Quantity (Kilograms):';
                quantityInput.setAttribute('min', '1');
                quantityInput.value = 1;
            }
        }

   function handleAddToCart(event) {
        const card = event.target.closest('.product-card');
        
        // 1. Get the full text from the <h3> tag (e.g., "நெல் தவிடு (Rice Bran)")
        const fullNameWithParentheses = card.querySelector('h3').textContent.trim(); 
        
        // 2. Split the string at the opening parenthesis '(' and take the first part [0].
        // This keeps only the Tamil text (e.g., "நெல் தவிடு").
        const name = fullNameWithParentheses.split('(')[0].trim(); 
        
        const selectedRadio = card.querySelector('input[type="radio"]:checked');
        const unit = selectedRadio.value;
        
        let price, unitName;
// ... rest of the function continues

            // **** START OF CHANGE 2 ****
            // Get price
            if (unit === 'bag') {
                price = parseFloat(card.getAttribute('data-bag-price'));
            } else {
                price = parseFloat(card.getAttribute('data-kg-price'));
            }
            
            // Get unit name from its label (FIX for 50kg/45kg bug)
            const unitLabel = card.querySelector(`label[for="${selectedRadio.id}"]`);
            unitName = unitLabel.textContent.split('-')[0].trim();
            // **** END OF CHANGE 2 ****

            const quantityInput = card.querySelector('.product-qty');
            const quantity = parseFloat(quantityInput.value);

            if (isNaN(quantity) || quantity <= 0) {
                alert('Please enter a valid quantity.');
                return;
            }
            
            const itemID = `${name.replace(/\s/g, '')}_${unit}`;

            const existingItemIndex = cart.findIndex(item => item.id === itemID);

            if (existingItemIndex > -1) {
                // Ensure to parse the current input value as float/integer
                cart[existingItemIndex].qty += quantity;
            } else {
                cart.push({ 
                    id: itemID, 
                    name: `${name}`, // Simplified name for bill
                    price, 
                    qty: quantity,
                    unit: unitName // Use the new dynamically fetched unitName
                });
            }

            updateCartDisplay();
            quantityInput.value = 1; 
            
            event.target.textContent = '✅ Added!';
            setTimeout(() => {
                event.target.textContent = '🛒 Add to Cart';
            }, 1000);
        }
        
        function handleQuantityControl(event) {
            const button = event.target;
            const action = button.getAttribute('data-action');
            const targetId = button.getAttribute('data-target');
            const quantityInput = document.getElementById(targetId);
            
            if (!quantityInput) return;

            let currentValue = parseInt(quantityInput.value) || 1;
            const min = parseInt(quantityInput.getAttribute('min')) || 1;

            if (action === 'increment') {
                currentValue += 1;
            } else if (action === 'decrement' && currentValue > min) {
                currentValue -= 1;
            }
            
            quantityInput.value = currentValue;
        }

        function handleRemoveItem(event) {
            const productId = event.target.getAttribute('data-id');
            cart = cart.filter(item => item.id !== productId);
            updateCartDisplay();
        }

        function updateCartDisplay() {
            // Recalculate cart count based on unique items in cart array
            cartCount.textContent = cart.length; 
            
            cartItemsContainer.innerHTML = '';
            let subtotal = 0;

            if (cart.length === 0) {
                emptyMessage.style.display = 'block';
                proceedToBillBtn.disabled = true; 
                
                cartSummaryView.style.display = 'block';
                billReviewView.style.display = 'none';
                orderFormView.style.display = 'none';
                modalTitle.textContent = 'Your Order Summary';
            } else {
                emptyMessage.style.display = 'none';
                proceedToBillBtn.disabled = false;

                cart.forEach(item => {
                    const itemTotal = item.price * item.qty;
                    subtotal += itemTotal;

                    const itemHTML = `
                        <div class="cart-item">
                            <div class="cart-item-details">
                                F<strong>${item.name}</strong> 
                                <br>
                                ${item.qty} ${item.unit} @ ₹${item.price.toFixed(2)} per unit
                            </div>
                            <strong>₹${itemTotal.toFixed(2)}</strong>
                            <button class="remove-item-btn" data-id="${item.id}">Remove</button>
                        </div>
                    `;
                    cartItemsContainer.insertAdjacentHTML('beforeend', itemHTML);
                    
                });
                // Attach event listeners to newly created remove buttons
                document.querySelectorAll('.remove-item-btn').forEach(btn => {
                    btn.addEventListener('click', handleRemoveItem);
                });
                
                cartSubtotal.textContent = `₹${subtotal.toFixed(2)}`;
            }
        }
        
       // **** START OF CHANGE 3 ****
       function updateBillReview() {
            // Get current date and time
            const now = new Date();
            const dateOptions = { year: 'numeric', month: 'long', day: 'numeric' };
            const timeOptions = { hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: true };
            
            const currentDate = now.toLocaleDateString('en-IN', dateOptions);
            const currentTime = now.toLocaleTimeString('en-IN', timeOptions);

            // Populate the new placeholders
            document.getElementById('bill-date').textContent = currentDate;
            document.getElementById('bill-time').textContent = currentTime;
            
            finalBillDetails.innerHTML = '';
            let total = 0;
            let totalKg = 0; // <-- NEW: Initialize total KG
            
            // Get the new span for total KG
            const billTotalKgSpan = document.getElementById('bill-total-kg');
            
            if (cart.length === 0) {
                 billTotalKgSpan.textContent = '0.00 Kgs'; // Reset if cart is empty
                 return 0;
            }

            cart.forEach(item => {
                const itemTotal = item.price * item.qty;
                total += itemTotal;

                // --- NEW KG CALCULATION LOGIC ---
                let kgPerUnit = 0;
                const unitString = item.unit.toLowerCase(); // e.g., "1 bag (50kg)" or "loose (per kg)"

                if (unitString.includes('(per kg)')) {
                    kgPerUnit = 1;
                } else if (unitString.includes('(50kg)')) {
                    kgPerUnit = 50;
                } else if (unitString.includes('(45kg)')) {
                    kgPerUnit = 45;
                }
                // We assume "Padi" and other units are not KGs
                
                totalKg += (kgPerUnit * item.qty);
                // --- END NEW LOGIC ---

                const itemHTML = `
                    <div class="bill-item">
                        <span>${item.name} (${item.qty} ${item.unit} @ ₹${item.price.toFixed(2)}/unit)</span>
                        <strong>₹${itemTotal.toFixed(2)}</strong>
                    </div>
                `;
                finalBillDetails.insertAdjacentHTML('beforeend', itemHTML);
            });

            // Update all totals
            // Update all totals
            billSubtotal.textContent = `₹${total.toFixed(2)}`;
            billTotalKgSpan.textContent = `${totalKg.toFixed(2)} Kgs`; 
            billGrandTotal.textContent = `₹${total.toFixed(2)}`;

            // --- NEW: Populate the hidden form field ---
            const totalKgHiddenInput = document.getElementById('total_kg_hidden');
            if (totalKgHiddenInput) {
                totalKgHiddenInput.value = totalKg.toFixed(2);
            }
            // --- END NEW ---
            
            return total;
        }
        // **** END OF CHANGE 3 ****

        function openModal(e) {
            e.preventDefault();
            // Always revert to the cart summary view when opening the modal
            cartSummaryView.style.display = 'block';
            billReviewView.style.display = 'none';
            orderFormView.style.display = 'none';
            modalTitle.textContent = 'Your Order Summary';
            
            updateCartDisplay();
            cartModal.style.display = 'block';
        }


        // --- Event Listeners and Initialization ---
        
        // Attach listener to cart icon and nav link
        cartIcon.addEventListener('click', openModal);

        // Attach listener to close button
        if (closeBtn) {
             closeBtn.addEventListener('click', closeModal); 
        }
        
        // Listener for the dark background and also ensures the close button is caught even if overlapped
        window.addEventListener('click', (event) => { 
            // If the modal background is clicked
            if (event.target == cartModal) {
                closeModal();
            }
            // If the close button or any child of it is clicked (The robust fix)
            const clickedDismiss = event.target.closest('.close-btn');
            if (clickedDismiss) {
                closeModal();
            }

            // --- NEW: Close notification dropdown if clicking outside ---
            if (notificationDropdown && notificationDropdown.classList.contains('show')) {
                if (!notificationBell.contains(event.target) && !notificationDropdown.contains(event.target)) {
                    notificationDropdown.classList.remove('show');
                }
            }
            
            // --- NEW: Close hamburger menu if clicking outside ---
            if (mainNav && mainNav.classList.contains('nav-open')) {
                if (!menuToggle.contains(event.target) && !mainNav.contains(event.target)) {
                    mainNav.classList.remove('nav-open');
                }
            }
        });
        
        // Listener to scroll page AND filter products
        if (searchInput) {
            searchInput.addEventListener('click', () => {
                const productsSection = document.getElementById('products');
                if (productsSection) {
                    productsSection.scrollIntoView({ 
                        behavior: 'smooth', 
                        block: 'start' 
                    });
                }
            });
            searchInput.addEventListener('keyup', filterProducts);
            searchInput.addEventListener('change', filterProducts); 
        }
        
        // Attach listeners to all product card controls
        document.querySelectorAll('.product-card').forEach(card => {
            // 1. Add to Cart Button
            const addToCartBtn = card.querySelector('.add-to-cart-btn');
            if(addToCartBtn) {
                addToCartBtn.addEventListener('click', handleAddToCart);
            }
            
            // 2. Unit Select Radio Buttons
            card.querySelectorAll('.price-selector input[type="radio"]').forEach(radio => {
                radio.addEventListener('change', handleUnitChange);
            });
            
            // 3. Quantity + and - Buttons
            card.querySelectorAll('.qty-btn').forEach(button => {
                button.addEventListener('click', handleQuantityControl);
            });
            
            // Set initial quantity label text
            const initialRadio = card.querySelector('input[type="radio"]:checked');
            if(initialRadio) {
                handleUnitChange({ target: initialRadio });
            }
        });

        // 1. CART VIEW -> BILL VIEW
        proceedToBillBtn.addEventListener('click', () => {
            const total = updateBillReview(); 
            orderDataJsonInput.value = JSON.stringify(cart, null, 2);
            finalTotalInput.value = total.toFixed(2);
            cartSummaryView.style.display = 'none';
            billReviewView.style.display = 'block';
            modalTitle.textContent = 'Final Order Bill';
        });
        
        // 2. BILL VIEW -> CONTACT FORM VIEW
        proceedToContactBtn.addEventListener('click', () => {
            billReviewView.style.display = 'none';
            orderFormView.style.display = 'block'; 
            modalTitle.textContent = 'Submit Inquiry';
        });

        // 3. CART VIEW <- BILL VIEW
        billBackBtn.addEventListener('click', () => {
            billReviewView.style.display = 'none';
            cartSummaryView.style.display = 'block';
            modalTitle.textContent = 'Your Order Summary';
        });
      
        
        // 4. CONTACT FORM VIEW <- BILL VIEW
        formBackBtn.addEventListener('click', () => {
            orderFormView.style.display = 'none';
            billReviewView.style.display = 'block';
            modalTitle.textContent = 'Final Order Bill';
        });

        // 5. DOWNLOAD PDF BUTTON FUNCTIONALITY (RENDER HTML TO PDF)
       // 5. DOWNLOAD PDF BUTTON FUNCTIONALITY (FIXED FOR MOBILE)
        if (downloadBillBtn && pdfContentWrapper) {
            downloadBillBtn.addEventListener('click', () => {
                
                // Get the element to capture
                const captureElement = pdfContentWrapper;
                
                // Temporarily hide buttons
                const billButtons = pdfContentWrapper.nextElementSibling.parentElement.querySelectorAll('.secondary-button, .cta-button');
                billButtons.forEach(btn => btn.style.display = 'none');
                
                html2canvas(captureElement, {
                    scale: 3, // Increase scale for high resolution
                    useCORS: true,
                    logging: false,
                    allowTaint: true,
                    
                    // --- FIX 1: Force capture of the *full* scrollable height/width ---
                    width: captureElement.scrollWidth,
                    height: captureElement.scrollHeight
                    
                }).then(canvas => {
                    const { jsPDF } = window.jspdf;
                    
                    const pdf = new jsPDF('p', 'mm', 'a4');
                    const pdfWidth = pdf.internal.pageSize.getWidth();
                    const pdfHeight = pdf.internal.pageSize.getHeight(); 
                    
                    const imgData = canvas.toDataURL('image/png');
                    const imgProps = pdf.getImageProperties(imgData);
                    
                    // Calculate image dimensions to fit PDF width
                    const imgWidth = pdfWidth;
                    const imgHeight = (imgProps.height * imgWidth) / imgProps.width;
                    
                    let heightLeft = imgHeight;
                    let position = 0; // This is the Y-offset
                    
                    // Add the first page
                    pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);
                    heightLeft -= pdfHeight; // Calculate remaining height

                    // --- FIX 2: Corrected pagination loop ---
                    while (heightLeft > 0) {
                        position -= pdfHeight; // Move the Y-position up by one page
                        
                        pdf.addPage();
                        // Add the *same* long image, but starting at the new negative Y-offset
                        pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight); 
                        heightLeft -= pdfHeight; // Decrement remaining height
                    }
                    // --- END OF FIX ---

                    pdf.save('Ramiah_Feeds_Order_Bill.pdf');
                    
                    // Restore buttons after capture
                    billButtons.forEach(btn => btn.style.display = '');
                });
            });
        }

        // Final Form Submission (Apps Script Backend Submission)
        checkoutForm.addEventListener('submit', function(e) {
             e.preventDefault(); // Stop default form submission

            orderMessage.style.display = 'none';
            
            // Show loading or disable buttons during submission (optional)
            const submitBtn = e.submitter;
            submitBtn.textContent = 'Submitting...';
            submitBtn.disabled = true;

            const formData = new FormData(this);
            
            fetch(APPS_SCRIPT_URL, {
                method: 'POST',
                body: formData,
            })
            .then(response => {
                // 1. Check for the specific 405 error (deployment issue)
                if (response.status === 405) {
                    throw new Error("HTTP 405 (Method Not Allowed). Check your Google Apps Script deployment URL and permissions.");
                }
                
                // 2. Check for success status (200-299)
                if (response.ok) {
                    // Try to parse JSON. If the script returns only plain text or an empty body, 
                    // this will fail and jump to the catch block (our intended fix).
                    return response.json(); 
                }
                
                // 3. Handle other non-success HTTP statuses
                return response.text().then(text => {
                     throw new Error(`HTTP error! Status: ${response.status}. Script response content (first 100 chars): ${text.substring(0, 100)}...`);
                });
            })
            .then(data => {
                // This block is reached ONLY if response.json() succeeded.
                if (data && data.result === 'success') {
                    // This is the true success path
                    orderMessage.textContent = '✅ Order Inquiry Submitted Successfully! We will contact you soon.';
                    orderMessage.style.color = 'green';
                    orderMessage.style.display = 'block';

                    // Clear the cart and form after successful submission
                    cart = [];
                    updateCartDisplay();
                    document.getElementById('customer_name').value = '';
                    document.getElementById('village_name').value = '';
                    document.getElementById('customer_phone').value = '';

                    // Automatically close the modal after a short delay
                    setTimeout(closeModal, 4000); 

                } else {
                    // This catches cases where HTTP is 200 but the script returned result: 'error'
                    throw new Error(data && data.error ? data.error : 'Unknown error occurred in the script response.');
                }
            })
            .catch(error => {
                console.error('Submission error:', error);
                
                // This block is reached if:
                // c) response.json() failed (SyntaxError). <-- THIS IS THE CURRENT ISSUE, WHICH MEANS DATA SAVED.

                let userMessage = error.message;

                if (error instanceof SyntaxError) {
                    // FIX: If data is successfully written but JSON fails (SyntaxError), 
                    // we assume success and display the success message.
                    
                    // Display the success message and perform cleanup steps manually
                    orderMessage.textContent = '✅ Order Inquiry Submitted Successfully! Data received by server.';
                    orderMessage.style.color = 'green';
                    orderMessage.style.display = 'block';

                    // Perform cleanup steps (same as the success path)
                    cart = [];
                    updateCartDisplay();
                    document.getElementById('customer_name').value = '';
                    document.getElementById('village_name').value = '';
                    document.getElementById('customer_phone').value = '';

                    // Automatically close the modal after a short delay
                    setTimeout(closeModal, 4000); 

                } else {
                    // For all other true errors (network, 405, 500, etc.)
                    orderMessage.textContent = `❌ Submission Failed: ${userMessage}`;
                    orderMessage.style.color = 'red';
                    orderMessage.style.display = 'block';
                }
            })
            .finally(() => {
                submitBtn.textContent = 'Submit Order';
                submitBtn.disabled = false;
            });

        }); 

        // Initialize on load
        updateCartDisplay();
    });
</script>
    
           
</body>
</html>
